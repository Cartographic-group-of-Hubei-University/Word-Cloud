<html>

<head>
	<meta charset="utf-8">
	<title>力导向图</title>
	<style>
		#bbtree rect {
			stroke: rgba(245, 19, 3, 0);
			fill: none;
		}

		#bbtree .collide rect {
			stroke: rgb(0, 255, 255);
		}

		#bbtree g,
		#vis text {
			cursor: pointer;
		}

		#bbtree {
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			-o-user-select: none;
			user-select: none;
			background-color: rgb(0, 0, 0);
			//background-image: url(hubu2.png);
			//background-repeat: repeat;
		}
	</style>

	<div id="bbtree" onload="start()">
		输入标签数量：<input type="text" id="city" name="city">
		<input type="button" value="生成" onclick="changeCount()" />
		<input type="button" value="启动" onclick="qidong()" />
	</div>
</head>

<body>
	<!-- <script src="https://d3js.org/d3-dispatch.v1.min.js"></script> -->
	<!-- <script src="https://d3js.org/d3-selection.v1.min.js"></script> -->
	<!-- <script src="https://d3js.org/d3-drag.v1.min.js"></script> -->
	<!-- <script src="https://d3js.org/d3-quadtree.v1.min.js"></script> -->
	<!-- <script src="https://d3js.org/d3-timer.v1.min.js"></script> -->
	<!-- <script src="./d3-force.js"></script> -->
	<!-- <script src="./d3-force/d3-force/src/manyBody.js"></script> -->
	<!-- <script src="./d3-force/d3-force/src/simulation.js"></script> -->
	<link href='https://fonts.googleapis.com/css?family=League+Script' rel='stylesheet' type='text/css'>
    <link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Bad+Script|Gruppo|Kumar+One+Outline|League+Script|Londrina+Outline|Monoton|Sriracha|Yellowtail&text=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789?+'>
	<link rel="stylesheet" href="css/style.css">
	<script src="js/index.js"></script>
	<script src="http://d3js.org/d3.v5.min.js" charset="utf-8"></script>
	<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
	<script>
		function changeCount() {
			var textCount = $("#city").val();
			window.localStorage.setItem("textCount", textCount);
			//debugger;
			parent.location.reload();
		}

		function qidong() {
			debugger;
			forceSimulation.tick();
		}

		function Tree(x, y, r, b) {
			this.x = x;
			this.y = y;
			this.r = r;
			this.b = b;
			this.children = null;
		}

		var minBoxSize = 1;

		function makeTree(shape, x, y, r, b) {
			if (contains(shape, x, y, r, b)) {
				return new Tree(x, y, r, b);
			} else if (intersects(shape, x, y, r, b)) {
				var cx = (x + r) >> 1,
					cy = (y + b) >> 1,
					tree = new Tree(x, y, r, b);
				if (r - x > minBoxSize || b - y > minBoxSize) {
					var children = [],
						c0 = makeTree(shape, x, y, cx, cy),
						c1 = makeTree(shape, cx, y, r, cy),
						c2 = makeTree(shape, x, cy, cx, b),
						c3 = makeTree(shape, cx, cy, r, b);
					if (c0) children.push(c0);
					if (c1) children.push(c1);
					if (c2) children.push(c2);
					if (c3) children.push(c3);
					if (children.length) tree.children = children;
				}
				return tree;
			}
			return null;
		}

		function contains(shape, x, y, r, b) {
			if (x < shape.x || y < shape.y || r >= shape.r || b >= shape.b) return false;
			x -= shape.x;
			y -= shape.y;
			r -= shape.x;
			b -= shape.y;
			var w = shape.r - shape.x,
				sprite = shape.sprite;
			for (var j = y; j < b; j++) {
				for (var i = x; i < r; i++) if (!sprite[j * w + i]) return false;
			}
			return true;
		}

		function intersects(shape, x, y, r, b) {
			x = Math.max(0, x - shape.x);
			y = Math.max(0, y - shape.y);
			r = Math.min(shape.r, r) - shape.x;
			b = Math.min(shape.b, b) - shape.y;
			var w = shape.r - shape.x,
				sprite = shape.sprite;
			for (var j = y; j < b; j++) {
				for (var i = x; i < r; i++) if (sprite[j * w + i]) return true;
			}
			return false;
		}

		function overlaps(tree, otherTree, aox, aoy, box, boy) {
			if (rectCollide(tree, otherTree, aox, aoy, box, boy)) {
				if (tree.children == null) {
					if (otherTree.children == null) {
						//forceSimulation.stop(); 	
						return true;
					}
					else for (var i = 0, n = otherTree.children.length; i < n; i++) {
						if (overlaps(tree, otherTree.children[i], aox, aoy, box, boy)) {
							//forceSimulation.stop(); 		  
							return true;
						}
					}
				} else for (var i = 0, n = tree.children.length; i < n; i++) {
					if (overlaps(otherTree, tree.children[i], box, boy, aox, aoy)) {
						//forceSimulation.stop();
						return true;
					}
				}
			}
			//forceSimulation.stop();
			return false;
		}

		function rectCollide(a, b, aox, aoy, box, boy) {
			return aoy + a.b > boy + b.y
				&& aoy + a.y < boy + b.b
				&& aox + a.r > box + b.x
				&& aox + a.x < box + b.r;
		}

		function acData(i) {
			var url = "http://api.map.baidu.com/place/v2/search?query=%E9%A5%AD%E5%BA%97&tag=%E7%BE%8E%E9%A3%9F&region=%E6%AD%A6%E6%B1%89&page_num=" + i + "&output=json&ak=4ISGs8LjGFdBGFD0dvh2BeDeQ6xjj9pa";
			$.ajax({
				url: url,
				dataType: 'jsonp',
				jsonp: "callback", //Jquery生成验证参数的名称
				processData: false,
				async: false,
				type: 'get',
				success: function (data) {
					//debugger;
					var results = data.results;
					for (var j = 0; j < results.length; j++) {
						//debugger;
						names.push(results[j].name);
						lat.push(results[j].location.lat);
						lng.push(results[j].location.lng);
					}
					//debugger;
					//console.log(data);
				},
				error: function (XMLHttpRequest, textStatus, errorThrown) {
					alert(XMLHttpRequest.status);
					alert(XMLHttpRequest.readyState);
					alert(textStatus);
				}
			});
		}
		var stextCount = localStorage.getItem("textCount");
		//debugger;
		var w = 1360,
			h = 770,
			p = 5;
		var glyphs = [];
		var sflag = 0;
		//debugger;
		//var names = ["翠竹园农家菜", "江滩印象(江滩公园店)", "金滏山自助烤肉(司门口店)", "刘胖子家常菜", "汉水谣餐厅", "亢龙太子酒轩(雄楚大道店)", "水墨江南(八一路店)", "海底捞火锅(世贸广场店)", "拾味馆(光谷天地店)", "荷花亭(销品茂店)", "三五酒店(百步亭店)", "九头鹰家宴(岳家嘴店)", "新海景酒店(太平洋店)", "湖锦酒楼(汉黄路店)", "肯德基(光谷世界城店)", "桃花醉小酒馆(武大店)", "食家酒庄", "南海底平价小海鲜(紫菘店)", "梦天湖生态园大酒店(民福分店)", "香港稻香海鲜点心酒家(维港购物中心店)", "桂萍特色牛杂(长堤街总店)", "麦当劳(光谷步行街店)", "闲云野鹤", "艳阳天(彭刘杨路店)", "双湖园酒店(解放路店)", "Happy站台美食购物广场", "肯德基(光谷天地店)", "小贝壳(洞庭街店)", "艳阳天酒家旅店(宝丰路店)", "沈记烧烤海鲜(万松园总店)", "味满堂川菜馆(二七路店)", "老成都巴蜀馆串串(二七总店)", "味掌柜(铁机店)", "李刚复兴村牛排", "食尚坊(京汉大道店)", "大中华酒楼(金地中心店)", "华中科技大学百景园(华大店)", "青莲(一分店)", "口味堂(机场河店)", "福宝漠北味坊(汉口店)", "胖锅轩(北湖总店)", "豪客来(武大路店)", "秦风酒店(青山店)", "江南金草帽(中心百货店)", "豪客来(司门口餐厅)", "八筒火锅", "捞旺猪肚鸡(唐家墩店)", "荷花亭融合餐厅(中商广场店)", "九吞回转自助火锅(吴家山店)", "豪客来(武汉南湖广场餐厅)", "上牛炭匠(武汉M加购物中心店)", "五仲炸肉(五中老店)", "汉堡王(银泰创意城店)", "重庆巴渝火锅(钟家村店)", "鱼友烤全鱼(虎泉时尚创意坊店)", "宝岛牛排(江汉一路店)", "金谷一韩式料理自助烧烤(海林广场店)", "刘师父(蔡锷路店)", "锅之恋(武汉摩尔城店)", "烫锅鲜砂锅串串(二七路店)", "老诚一锅醉太羊(光谷天地店)", "韩厨(奥山世纪广场店)", "秀玉红茶坊(新佳丽时尚广场店)", "餐谋天下(兴业路店)", "菲特堡(光谷国际广场店)", "我家小馆(永旺梦乐城金银潭店店)", "凤爪王烧烤店(南京路店)", "海底捞火锅(新唐万科店)", "柚彩铁板烧自助料理", "米桃餐厅(武汉M加购物中心店)", "橘味餐厅(世贸广场店)", "茶港茶餐厅(世贸广场店)", "仟吉西饼(沌口店)", "小胡鸭(中南二店)", "小川料理(街道口总店)", "無境·匠心日本料理(汉街店)", "麦当劳(世贸广场店)", "肯德基(循礼门店)", "约你烘焙餐厅(永旺梦乐城金银潭店店)", "恩施印象(武汉荟聚中心店)", "三十三间堂(销品茂店)", "小胡鸭(青山店)", "仟吉西饼(金色华府店)", "麦格芬牛排(永旺梦乐城金银潭店店)", "楚香巴土印象(群星城店)", "米国煲仔饭(兰陵路店)", "尊宝比萨(软件园店)", "西堤厚牛排(武汉群光广场店)", "华莱士汉堡店(钢洲花园店)", "匠芯抄手(胜利街店)", "廖记棒棒鸡(华科店)", "川行天下(中百广场店)", "小仓极匠和食(珞珈创意体验城店)", "皇冠(宗关南国店)", "皇冠蛋糕(古田四路店)", "紫燕百味鸡(建设二路店)", "DQ(凯德广场店)"];
		//var lat = [30.548571, 30.591537, 30.549195, 30.548553, 30.560032, 30.516101, 30.543203, 30.586136, 30.481505, 30.59355, 30.662904, 30.581265, 30.583014, 30.668091, 30.509595, 30.539475, 30.662557, 30.517174, 30.624902, 30.574544, 30.574424, 30.510832, 30.618307, 30.545172, 30.540838, 30.584647, 30.484079, 30.596192, 30.581611, 30.598467, 30.635207, 30.632896, 30.606282, 30.612546, 30.596545, 30.503748, 30.521839, 30.556046, 30.60692, 30.594026, 30.606661, 30.538779, 30.629475, 30.587509, 30.549075, 30.623511, 30.626527, 30.542262, 30.62659, 30.510464, 30.588696, 30.64603, 30.532707, 30.55614, 30.519904, 30.587737, 30.628975, 30.596696, 30.564457, 30.632868, 30.483154, 30.623574, 30.5844, 30.632058, 30.513234, 30.656555, 30.588017, 30.629641, 30.597498, 30.589168, 30.58603, 30.586131, 30.513339, 30.544444, 30.532242, 30.565025, 30.586341, 30.590627, 30.657009, 30.623639, 30.594885, 30.643078, 30.615989, 30.656502, 30.590667, 30.593559, 30.47833, 30.531769, 30.62224, 30.610822, 30.522251, 30.370248, 30.532485, 30.591759, 30.595651, 30.632403, 30.575025];
		//var lng = [114.421951, 114.309309, 114.3052, 114.333949, 114.290345, 114.353022, 114.352777, 114.275582, 114.416712, 114.348865, 114.325462, 114.367233, 114.245108, 114.337987, 114.410844, 114.363202, 114.335395, 114.397626, 114.399946, 114.256328, 114.263724, 114.409502, 114.279999, 114.308688, 114.303543, 114.297811, 114.417035, 114.309732, 114.256402, 114.274865, 114.314755, 114.321913, 114.376748, 114.250177, 114.299279, 114.400437, 114.414376, 114.341125, 114.269029, 114.295839, 114.27842, 114.363466, 114.379064, 114.29617, 114.304689, 114.307864, 114.277673, 114.338317, 114.14145, 114.331126, 114.293265, 114.400232, 114.362268, 114.273072, 114.376311, 114.29757, 114.15036, 114.309407, 114.214538, 114.3217, 114.416897, 114.368256, 114.297285, 114.273942, 114.404272, 114.244194, 114.300509, 114.268252, 114.298512, 114.292547, 114.275221, 114.275681, 114.166842, 114.338407, 114.360343, 114.341553, 114.275076, 114.292241, 114.243151, 114.174651, 114.349517, 114.409642, 114.29276, 114.24413, 114.356275, 114.30343, 114.408745, 114.361671, 114.386712, 114.316291, 114.421851, 114.327156, 114.363234, 114.22981, 114.219743, 114.381202, 114.273968];

		var names = ["湖北大学","如家酒店(软件园路店)", "7天优品酒店(沌口经济开发区店)", "7天酒店(崇仁路地铁站店)", "锦江之星(吴家山经济开发区店)", "布丁酒店(广埠屯地铁站店)", "7天酒店(首义路地铁站店)", "7天酒店(亚贸广场军区总医院地铁站店)", "毕优特酒店(武汉光谷店)", "7天酒店(武汉解放公园店)", "如家酒店(虎泉街地铁站店)", "城市便捷酒店(百步亭店)", "维纳斯国际酒店(汉口北店)", "汉庭酒店(沌阳大道地铁站店)", "丽枫酒店(武昌火车站广场店)", "99优选酒店(武昌火车站地铁站店)", "7天酒店(吉庆街地铁站店)", "美居酒店(黄鹤楼店)", "武汉江都商务宾馆", "维也纳国际酒店(解放大道同济医学院店)", "武汉美联假日酒店(市中心店)", "如家·neo(武汉书城路理工大学店)", "汉庭酒店(销品茂店)", "丽枫酒店(武汉高铁店)", "维也纳酒店(吴家山经济开发区店)", "宜尚酒店(武汉王家湾店)", "汉庭酒店(原首义广场店)", "汉庭酒店(武汉光谷步行街店)", "城市便捷酒店(武汉宗关店)", "武汉东方建国大酒店", "汉庭酒店(中山公园地铁站店)", "水云岚酒店(江汉路店)", "城市便捷酒店(光谷欧亚达店)", "汉庭酒店(江汉大学店)", "精途酒店(武汉欢乐谷店)", "汉驿连锁旅店(经济学院店)", "汉庭酒店(武汉吴家山店)", "纽宾凯酒店(徐东地铁站店)", "全季酒店(汉口火车站广场店)", "武汉梁子湖龙湾半岛度假酒店", "维也纳国际酒店(武汉国际会展中心店)", "武汉蔡甸健康谷华美达安可酒店", "九龙国际大酒店(雄楚大街店)", "如家酒店(建设二路店)", "宜尚酒店(武汉六渡桥地铁站店)", "城市便捷酒店(阳光大道店)", "莫泰酒店(青年路地铁站店)", "城市便捷酒店(武汉体育中心店)", "宜尚酒店(武汉广场万松园店)", "丽枫酒店(武汉理工大学店)", "未来城大酒店", "苏美道森酒店(武汉王家湾店)", "如家酒店(王家湾地铁站店)", "维也纳3好酒店(户部巷店)", "如家商旅酒店(武汉国际博览中心永旺店)", "维也纳酒店(四季美农贸城店)", "喆啡酒店(欢乐谷仁和路地铁站店)", "如家快捷酒店(武汉江汉路步行街江滩店)", "武汉金泰酒店(橡树店)", "城市便捷酒店(街道口店)", "城市便捷酒店(汉口火车站地铁站店)", "城市便捷酒店(卓刀泉南路店)", "锦江都城(武汉沌口店)", "精途酒店(金银潭大道店)", "城市便捷酒店(王家巷码头店)", "三江航天酒店(园博园店)", "汉庭酒店(武汉菱角湖万达店)", "武汉白玉国际酒店", "汉庭酒店(菱角湖地铁站店)", "爱豪国际酒店", "如家(高新大道店)", "多米亚朵酒店", "速8酒店(徐东销品茂店)", "丽橙酒店·智(武汉光谷杨家湾地铁站店)", "运7酒店(武汉首义路店)", "武汉欢乐格林酒店(武汉欢乐谷店)", "锦江之星(中华路黄鹤楼户部巷店)", "如家商旅酒店(中南民大店)", "精途酒店(武汉东湖铁机路地铁站店)", "城市便捷酒店(汉口火车站西广场店)", "海庭龙安酒店", "骏怡连锁酒店(武汉东西湖大道店)", "馨梦商务宾馆(二七路店)", "莱客伊精品酒店", "城市便捷酒店(傅家坡店)", "如家酒店(武汉光谷金融港店)", "如家·neo(武汉江汉路步行街店)", "天锦商务宾馆(欢乐谷店)", "莱克快捷酒店(江汉路店)", "银海商务酒店(碧海花园店)", "华洋晶品酒店", "V9假日酒店(万松园美食街店)", "如家睿柏·云酒店(武汉吴家山东吴大道轻轨站店)", "精途酒店(武汉江汉路步行街店)", "果然主题酒店(菱角湖店)", "速7快捷宾馆(八古墩店)", "徽茵湖畔酒店(武汉泛海CBD店)", "瑞祥商务宾馆(前进一路店)", "V7城市主题酒店(光谷店)", "华尚明珠酒店", "武汉派尚主题酒店(解放公园店)"];
		var lat =  [30.58292,30.479725, 30.502568, 30.571832, 30.631426, 30.529047, 30.53935, 30.534604, 30.509843, 30.609428, 30.515466, 30.649207, 30.722755, 30.492416, 30.536947, 30.530863, 30.59312, 30.551441, 30.586098, 30.583081, 30.589763, 30.507822, 30.598828, 30.614977, 30.640836, 30.542258, 30.536726, 30.504734, 30.590463, 30.622054, 30.587712, 30.586628, 30.513114, 30.513111, 30.60398, 30.427081, 30.624508, 30.597941, 30.620432, 30.24736, 30.581936, 30.55534, 30.516344, 30.622366, 30.581541, 30.673718, 30.594873, 30.504281, 30.594091, 30.518394, 30.530428, 30.571188, 30.566865, 30.545415, 30.517301, 30.723764, 30.614299, 30.586311, 30.457441, 30.534459, 30.62264, 30.5128, 30.511383, 30.664035, 30.575473, 30.612376, 30.609765, 30.613031, 30.609472, 30.609985, 30.501843, 30.663468, 30.592056, 30.508367, 30.544787, 30.5948, 30.555865, 30.50219, 30.591249, 30.623432, 30.508409, 30.630994, 30.632718, 30.587934, 30.542036, 30.4676, 30.591186, 30.620874, 30.587446, 30.653812, 30.610425, 30.599614, 30.622624, 30.586268, 30.617282, 30.619309, 30.60681, 30.587169, 30.503788, 30.51272, 30.608348];
		var lng =[114.340713,114.41217, 114.167599, 114.268131, 114.072277, 114.369806, 114.316819, 114.350821, 114.409409, 114.308693, 114.381104, 114.328491, 114.354656, 114.164057, 114.323975, 114.320619, 114.298931, 114.3254, 114.283898, 114.260425, 114.288766, 114.342805, 114.353928, 114.427744, 114.050302, 114.205475, 114.308307, 114.406638, 114.23463, 114.264952, 114.280626, 114.294683, 114.382956, 114.158425, 114.398544, 114.435777, 114.154462, 114.35208, 114.259994, 114.465059, 114.281095, 114.11843, 114.3506, 114.388, 114.290783, 114.578859, 114.268359, 114.172828, 114.27362, 114.357223, 114.359687, 114.219991, 114.221766, 114.305143, 114.224516, 114.355315, 114.393923, 114.305444, 114.385671, 114.353013, 114.265207, 114.373161, 114.181441, 114.266897, 114.300523, 114.203834, 114.276093, 114.492043, 114.278221, 114.434764, 114.424876, 114.290964, 114.344499, 114.391897, 114.316518, 114.378214, 114.303261, 114.40487, 114.374786, 114.260815, 114.405832, 114.073028, 114.326173, 114.347232, 114.332856, 114.426422, 114.296121, 114.394053, 114.293724, 114.205946, 114.392659, 114.27605, 114.135083, 114.294722, 114.277337, 114.265316, 114.26099, 114.28664, 114.399825, 114.387071, 114.30925];
		//驾车距离
		var driveJuli = [10,2266, 2436, 1486, 2860, 1421, 1114, 1289, 1829, 836, 1772, 1243, 2143, 2408, 1087, 1201, 1173, 1025, 1294, 1387, 1218, 1538, 457, 1809, 3050, 2100, 1520, 1961, 1623, 1162, 1309, 1326, 1942, 2560, 1409, 2361, 1980, 363, 1306, 4176, 1354, 2704, 1679, 1156, 1235, 2814, 1587, 2454, 1418, 1607, 1301, 1825, 1997, 1287, 2168, 2223, 1251, 818, 2573, 1304, 1303, 1561, 2492, 1780, 1035, 1719, 1334, 2248, 1321, 1363, 1924, 1404, 299, 1843, 1098, 991, 1033, 1988, 871, 1547, 1833, 2842, 1053, 306, 1087, 2300, 1096, 1309, 1312, 1844, 1355, 1353, 2433, 1427, 1325, 1322, 1479, 1165, 1946, 1946, 775];
		//公交距离
	    var transitJuli =  [0,4493, 4036, 2737, 6573, 2126, 1734, 1958, 2983, 1903, 2517, 2902, 4245, 3905, 1303, 1905, 2022, 1206, 1788, 2692, 1965, 2857, 1044, 3139, 8128, 3402, 2126, 3488, 2828, 2296, 2073, 2037, 2931, 4541, 2963, 5265, 4114, 878, 2145, 9097, 2365, 3856, 3011, 2123, 2041, 6990, 2130, 3752, 2413, 2674, 2079, 3261, 2967, 2185, 5142, 4474, 2689, 2553, 5487, 2183, 2368, 3176, 3785, 3247, 2658, 3949, 2097, 4954, 2087, 3125, 4366, 3036, 814, 2733, 2156, 2129, 2376, 3543, 2005, 2112, 3011, 6495, 1840, 1087, 1882, 3536, 1860, 2723, 2204, 3656, 2812, 2073, 4450, 2167, 2050, 2375, 2534, 1844, 3357, 2588, 1462];
		//骑行距离
		var rideJuli = [0,6564, 8641, 4252, 11343, 3539, 2391, 2908, 5027, 3963, 4332, 5641, 9137, 9044, 2316, 2548, 3177, 1850, 3392, 5017, 3225, 4017, 855, 3523, 12114, 6583, 2845, 5565, 5705, 5073, 3538, 3005, 4430, 8833, 2622, 9094, 8587, 784, 4963, 16739, 3621, 9271, 3680, 2268, 3194, 16505, 5071, 8510, 3997, 3914, 3429, 5656, 5445, 2279, 6432, 9133, 2400, 2783, 7053, 2964, 5101, 4336, 8152, 6694, 2773, 7148, 4239, 6308, 4152, 3991, 5985, 6234, 504, 4888, 2220, 1777, 1999, 5391, 1668, 5178, 5545, 11282, 4800, 606, 2219, 7366, 3192, 2636, 3030, 7932, 2393, 3886, 9281, 2969, 4536, 4818, 4778, 3306, 5189, 4588, 3847];
		var rates = [0,4.4, 4.3, 4.5, 4.3, 3.6, 4.4, 4.2, 3.8, 4.7, 4.2, 4.3, 4.8, 4.6, 4.5, 4.3, 4.4, 4.9, 4.1, 4.8, 4.3, 4.3, 5, 4.5, 4.7, 4.7, 4.6, 4.6, 4.5, 4.3, 4.7, 4.9, 4.7, 4.6, 4.7, 4.3, 4.8, 4.2, 5, 4.2, 4.2, 5, 4.1, 4.5, 4.9, 4.6, 4.5, 4.1, 4.7, 4.6, 4.5, 4.7, 4.5, 4.7, 5, 4.9, 4.7, 4.4, 4.9, 4.3, 4.3, 4.2, 4.7, 4.3, 4.8, 4.4, 4.5, 5, 4.6, 4.9, 4.5, 4.7, 4.4, 4.7, 5, 3.7, 4.7, 4, 4.7, 4.2, 4.5, 4.4, 4.1, 5, 4.7, 4.4, 4.6, 4.8, 4.2, 4.7, 4.6, 4.7, 4.5, 4.5, 4, 3.6, 4.9, 4.5, 4.3, 5, 4.1];
		var hot =  [1,63, 41, 122, 76, 2, 200, 50, 1, 120, 79, 85, 106, 9, 69, 21, 87, 68, 200, 100, 1, 200, 75, 54, 78, 48, 1, 200, 56, 30, 1, 5, 161, 200, 200, 42, 41, 38, 63, 24, 200, 57, 24, 200, 37, 1, 11, 155, 67, 10];
		//var names = ["湖北大学", "四美塘公园", "粤汉码头", "宋庆龄汉口旧居纪念馆", "汉口江滩芦苇荡"];
		//var lat =[30.58292, 30.602735, 30.595153, 30.592172, 30.61173];
		//var lng=[114.340713, 114.344745, 114.313247, 114.308773, 114.323225];
        debugger;

		var i = -1;
		var myVar = null;
		var distance = [];
		var ydistance = [];
		var toCenter = [];
		var firstArea = 0;
		var secondArea = 0;
		var thirdArea = 0;
		var forthArea = 0;
		toCenter[0] = 0;
		distance[0] = 0;
		ydistance[0] = 0;
		/***************删除重复数组*************/
		for (var i = 0; i < names.length; i++) {
			for (var j = i + 1; j < names.length; j++) {
				if (names[i] === names[j] || transitJuli[j]==null) {
					names.splice(j, 1);
					lat.splice(j, 1);
					lng.splice(j, 1);
					rates.splice(j, 1);
					transitJuli.splice(j,1)
					driveJuli.splice(j,1)
					rideJuli.splice(j,1)
				}
			}
		}
			debugger;
		/******************拉伸*************/
		// for(var i = 1; i < names.length; i++)
		// {
		// lat[i]=lat[i]+250*(lat[i]-lat[0]);
		// lng[i]=lng[i]+250*(lng[i]-lng[0]);
		// }


		/***************计算距中心标签欧氏距离*************/
		//  for (let j = 1; j < names.length; j++) {
		//  	//欧式距离
		//  	distance[j] = Math.sqrt(Math.pow((lat[j] - lat[0]), 2) + Math.pow((lng[j] - lng[0]), 2));
		//  	//Y轴距离
		//  	//ydistance[j] = Math.abs(lat[j] - lat[0]);
		//  }


		//debugger;

		//  for (var m = 0; m < names.length - 2; m++) {
		//  	for (var n = 1; n < names.length - m - 1; n++) {
		//  		if (distance[n] > distance[n + 1]) {
		//  			var swap = distance[n];
		//  			var swapname = names[n]
		//  			var swaplat = lat[n];
		//  			var swaplng = lng[n];
		// 			var swaptransitJuli = transitJuli[n];

		//  			distance[n] = distance[n + 1];
		//  			distance[n + 1] = swap;
		//  			names[n] = names[n + 1];
		//  			names[n + 1] = swapname;
		//  			lat[n] = lat[n + 1];
		//  			lat[n + 1] = swaplat;
		//  			lng[n] = lng[n + 1];
		//  			lng[n + 1] = swaplng;
		// 			transitJuli[n] = transitJuli[n + 1];
		//  			transitJuli[n + 1] = swaptransitJuli;
		//  		}

		//  	}
		//  }

		debugger;
		/***************排序*************/
		for (var m = 0; m < names.length - 2; m++) {
			for (var n = 1; n < names.length - m - 1; n++) {
				if (transitJuli[n] > transitJuli[n + 1]) {
					var swap = transitJuli[n];
					var swapname = names[n]
					var swaplat = lat[n];
					var swaplng = lng[n];
					var swaprates = rates[n];

					transitJuli[n] = transitJuli[n + 1];
					transitJuli[n + 1] = swap;
					names[n] = names[n + 1];
					names[n + 1] = swapname;
					lat[n] = lat[n + 1];
					lat[n + 1] = swaplat;
					lng[n] = lng[n + 1];
					lng[n + 1] = swaplng;
					rates[n] = rates[n + 1];
					rates[n + 1] = swaprates;
				}

			}
		}
					names = names.slice(0,50)
					lat = lat.slice(0,50)
					lng = lng.slice(0,50)
					transitJuli = transitJuli.slice(0,50)
					rates = rates.slice(0,50)
   debugger;
		//    for (var n = 1; n < names.length - 1; n++) {
		//     if(Math.abs(lat[n] - lat[n + 1])<0.001&Math.abs(lng[n] - lng[n + 1])<0.001)
		// 	{   
		// 	        debugger;
		// 			if (ydistance[n] > ydistance[n + 1]) {
		// 			var swap = distance[n];
		// 			var swapname = names[n]
		// 			var swaplat = lat[n];
		// 			var swaplng = lng[n];

		// 			ydistance[n] = ydistance[n + 1];
		// 			ydistance[n + 1] = swap;
		// 			names[n] = names[n + 1];
		// 			names[n + 1] = swapname;
		// 			lat[n] = lat[n + 1];
		// 			lat[n + 1] = swaplat;
		// 			lng[n] = lng[n + 1];
		// 			lng[n + 1] = swaplng;
		// 		}
		// 	}

		//        }

     console.log(names)

	</script>
</body>

</html>